version: '3.8'

services:
  viva-esperanca:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        # Vari치veis necess치rias durante o BUILD (Next.js embute elas no c칩digo)
        - NEXT_PUBLIC_SUPABASE_URL=${NEXT_PUBLIC_SUPABASE_URL:-}
        - NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY=${NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY:-}
    ports:
      - "3000:3000"
    environment:
      # Vari치veis de runtime (configure no painel do Easypanel)
      NODE_ENV: production
      NEXT_PUBLIC_SUPABASE_URL: ${NEXT_PUBLIC_SUPABASE_URL:-}
      NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY: ${NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY:-}
      N8N_API_SECRET: ${N8N_API_SECRET:-}
      SUPABASE_SERVICE_ROLE_KEY: ${SUPABASE_SERVICE_ROLE_KEY:-}
    restart: unless-stopped